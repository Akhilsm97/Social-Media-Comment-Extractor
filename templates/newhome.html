{% load static %}
<!DOCTYPE html>
<html>
<head>
<title>My Institute</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Exchange Education a Responsive Web Template, Bootstrap Web Templates, Flat Web Templates, Android Compatible Web Template, Smartphone Compatible Web Template, Free Web Designs for Nokia, Samsung, LG, Sony Ericsson, Motorola Web Design" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //For-Mobile-Apps -->

<!-- Custom Theme files -->
    <!-- Bootstrap Styling --> <link rel='stylesheet' href="{% static 'css1/bootstrap.css' %}" type='text/css' />
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> <script src="{% static 'js1/jquery.min.js' %}"></script>
    <!-- Bootstrap-Working-File --> <script src="{% static 'js1/bootstrap.min.js' %}"></script>
    <!-- Index-Page-Styling --> <link rel="stylesheet" href="{% static 'css1/style.css' %}" type="text/css" media="all" />
	<!-- Owl-Carousel-Styling --> <link rel="stylesheet" href="{% static 'css1/owl.carousel.css' %}" type="text/css" media="all">
<!-- //Custom Theme files -->

<!-- Smooth-Scrolling -->
<script type="text/javascript" src="{% static 'js1/move-top.js' %}"></script>
<script type="text/javascript" src="{% static 'js1/easing.js' %}"></script>
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $(".scroll").click(function(event){
            event.preventDefault();
            $('html,body').animate({scrollTop:$(this.hash).offset().top},1200);
        });
    });
</script>
<!-- //Smooth-Scrolling -->

<!-- Calender-JavaScript -->
	<link rel="stylesheet" href="{% static 'css/clndr.css' %}" type="text/css" />
	<script src="{% static 'js1/underscore-min.js' %}" type="text/javascript"></script>
	<script src= "{% static 'js1/moment-2.2.1.js' %}" type="text/javascript"></script>
	<script src="{% static 'js1/clndr.js' %}" type="text/javascript"></script>
	<script src="{% static 'js1/site.js' %}" type="text/javascript"></script>
<!-- //Calender-JavaScript -->
<style>
      .nav{
  background-color: lightblue;
}
.navhead{
  margin: 20px auto;
}
.navhead a:hover, a:focus {
  color: #2a6496;
  text-decoration: none;
}
.btn-outline-light {
    color: #214569;
    border-color: #10253a;
}

    </style>
</head>

<!-- Body-Starts-Here -->
<body>

	<!-- Header-Starts-Here -->
	<div class="header">

		<!-- Navbar-Starts-Here -->
	    <nav class="navbar navbar-inverse">
	        <div class="container">
	            <div class="navbar-header">
	                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
	                    <span class="sr-only">Toggle navigation</span>
	                    <span class="icon-bar"></span>
	                    <span class="icon-bar"></span>
	                    <span class="icon-bar"></span>
	                </button>

	                <!-- Logo --><a class="navbar-brand" href="#">KMM Admin</a><!-- //Logo -->

	            </div>
	            <!-- Navbar-Collapse -->
	            <div id="navbar" class="navbar-collapse collapse">

	                <ul class="nav navbar-nav navbar-right">
                            <li><a onclick="window.location.href='adminHome.php';" class="scroll">Home</a></li>
						<li><a onclick="window.location.href='adminHome.php';" class="scroll">Home</a></li>
						<li><a onclick="window.location.href='adminHome.php';" class="scroll">Home</a></li>
						<li><a onclick="window.location.href='adminHome.php';" class="scroll">Home</a></li>
		                <!--<li><a href="#about" class="scroll">About</a></li>-->
                                <!--<li><a onclick="window.location.href='viewaluminidetails.jsp';" class="scroll">View Alumini Details</a></li>-->
		                <!-- Dropdown -->
<!--		                <li role="presentation" class="dropdown carat1">-->
<!--			                <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">ADD<span class="caret"></span> </a>-->
<!--				                <ul class="dropdown-menu dropdown1">-->
<!--                                                    <li><a onclick="window.location.href='AddTeachers.php';">Add Staff</a></li>-->
<!--                                                    <li><a onclick="window.location.href='addStudents.php';" class="scroll">Add Students</a></li>-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='addnonteaching.jsp';" class="scroll">Add Non Teaching</a></li>&ndash;&gt;-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='addparent.jsp';" class="scroll">Add Parents</a></li>&ndash;&gt;-->
<!--                                                        <li><a onclick="window.location.href='addnotification.php';" class="scroll">Add Notifications</a></li>-->
<!--                                                        <li><a onclick="window.location.href='addcourse.php';" class="scroll">Add Course</a></li>-->
<!--				                </ul>-->
<!--		                </li>-->
<!--                                <li role="presentation" class="dropdown carat1">-->
<!--			                <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">VIEW<span class="caret"></span> </a>-->
<!--				                <ul class="dropdown-menu dropdown1">-->
<!--					    		<li><a onclick="window.location.href='viewteachers.php';" class="scroll">View Staff</a></li>-->
<!--		                			<li><a onclick="window.location.href='viewstudents.php';" class="scroll">View Students</a></li>-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='viewnonteaching.jsp';" class="scroll">View Non Teaching</a></li>&ndash;&gt;-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='viewparents.jsp';" class="scroll">View Parents</a></li>&ndash;&gt;-->
<!--                                                        <li><a onclick="window.location.href='viewpayments.php';" class="scroll">View Payments</a></li>-->
<!--                                                        &lt;!&ndash;<li><a onclick="window.location.href='viewaluminidetails.jsp';" class="scroll">View Alumini Details</a></li>&ndash;&gt;-->
<!--				                </ul>-->
<!--		                </li>-->
<!--                                <li role="presentation" class="dropdown carat1">-->
<!--			                <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">DELETE<span class="caret"></span> </a>-->
<!--				                <ul class="dropdown-menu dropdown1">-->
<!--					    		<li><a onclick="window.location.href='deleteteacher.php';" class="scroll">Delete Staff</a></li>-->
<!--		                			<li><a onclick="window.location.href='deletestudent.php';" class="scroll">Delete Students</a></li>-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='deletenonteaching.jsp';" class="scroll">Delete Non Teaching</a></li>&ndash;&gt;-->
<!--					                &lt;!&ndash;<li><a onclick="window.location.href='deleteparent.jsp';" class="scroll">Delete Parents</a></li>&ndash;&gt;-->
<!--                                                        &lt;!&ndash;<li><a onclick="window.location.href='viewaluminidetails.jsp';" class="scroll">View Alumini Details</a></li>&ndash;&gt;-->
<!--				                </ul>-->
<!--		                </li>-->
		                <!-- //Dropdown -->

					    <!--<li><a onclick="window.location.href='addnotification.jsp';" class="scroll">Add Notification</a></li>-->
                                            <li><a onclick="window.location.href='../index.php';" class="scroll">Logout</a></li>

		                <!-- Login-Button -->
<!--		                <li>
			                <div class="login-pop">
				                <div id="loginpop">
					                <a href="#" id="loginButton"><span>Login</span></a>
					                <div id="loginBox">
						                <form id="loginForm">
							                <fieldset id="body">
								                <fieldset>
									                <label for="email">Email Address</label>
									                <input type="text" name="email" id="email">
								                </fieldset>
								                <fieldset>
									                <label for="password">Password</label>
									                <input type="password" name="password" id="password">
								                </fieldset>
									                <input type="submit" id="login" value="LOGIN">
									                <label for="checkbox"><input type="checkbox" id="checkbox"> <i>Remember me</i></label>
								            </fieldset>
							                <span><a href="#">Forgot your password?</a></span>
						                </form>
					                </div>
				                </div>
			                </div>
			                <script src="js/menu_jquery.js"></script>
		                </li>-->
		                <!-- //Login-Button -->

		                <!-- Signup-Button -->
<!--		                <li>
			                <div class="login-pop">
				                <div id="loginpop">

				                </div>
			                </div>
					        <script src="js/signup_jquery.js"></script>
		                </li>-->
		                <!-- //Signup-Button -->

	                </ul>

	            </div>
	            <!-- //Navbar-Collapse -->

	        </div>
	    </nav>
	    <!-- //Navbar-Ends-Here -->

		<!-- Carousel-Starts-Here -->
		<div id="myCarousel" class="carousel slide" data-ride="carousel">

			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
				<li data-target="#myCarousel" data-slide-to="3"></li>
				<li data-target="#myCarousel" data-slide-to="4"></li>
			</ol>

			</div>
		</div>
		<!-- //Carousel-Ends-Here -->

	</div>


<div class="col-sm-3">
            <a href="/profilepic">Profile Pic</a><br>

            {% for i in profilepic %}
            <img src="../..{{i.profile_pic}}" height="100" width="100">
             {% endfor %}
    </div>
    <div class="col-lg-6">
     {% for i in request1 %}
        {% if i.status == "1" %}
        <div>Notifications - {{request2}}</div>
        {{i.notification}} from {{i.username}}
     {{request2}}
    </div>

    {% if i.notification == "request send" %}

    <div class="col-lg-3">
      <form class="col-sm-5" method="POST" action="{% url 'accept'%}"> {% csrf_token %}
          <input type="hidden" name="acceptusername" value="{{i.username}}">
          <input type="hidden" id="followstatus" name="followstatus" value="2">
      <button type="submit" class="btn btn-outline-light"

                    style="
    color: #214569;
    border-color: #10253a;">
                Confirm
            </button>
      </form>

        <form class="col-sm-5" method="POST" action="{% url 'decline'%}"> {% csrf_token %}
            <input type="hidden"  name="declineusername" value="{{i.username}}">
             <input type="hidden"  name="followstatus" value="3">
         <button type="submit" class="btn btn-outline-light"

                    style="
    color: #214569;
    border-color: #10253a;">
                Delete
            </button>
        </form>
    </div>

    {% else %}
       <div></div>
    {% endif %}
    {% endif %}
    {% endfor %}
    </div>


    <div class="col-lg-6">
        {% for i in friend %}
        {% if i.username == username %}
        {{i.followingusername}},

        {% else %}
        {{i.username}},

        {% endif %}
        {% endfor %}
    </div>

    <section id="all_posts">




        {% block search %}
        {% endblock %}



        {% for p in posts %}
        <div class="row post_area">

            <div class="col-sm-2">
            </div>
            <div class="col-sm-6 post">
                <div style="margin:10px auto;">
                    <i class="fas fa-user-circle" style="font-size: 35px;"></i><span id="user">{{p.username}}</span>
                    <span style="margin-left:280px; font-size:14px;">{{p.time}}</span>
                </div>
                <div>
                    <p>{{p.post_text}}
                    </p>
                    <img src="../../media/{{p.post_img}}" alt="" class="responsive">
                </div>
                <div class="like_btn">
                    <span style="margin-right:0px;" id="impr{{p.post_id}}">24</span>
                    <span><i class="far fa-thumbs-up" id="icon{{p.post_id}}" style="color:black;"></i> <button
                            class='btn l_btn' id="{{p.post_id}}"> Like</button></span>
                    <span><i class="far fa-comment"></i> <a href="/app/insertcomment/{{p.post_id}}"> Comment</a></span>

                </div>
            </div>
            <div class="col-sm-4">

            </div>
        </div>
        {% endfor %}
    </section>
</div>



{% csrf_token %}
<script type="text/javascript">
    $(document).ready(function(){
         $(".l_btn").click(function(){
           console.log("Button clicked");
           p_id = $(this).attr('id')
           console.log(p_id);
           // console.log($(".shu").attr('id'));
           p_l_username = $("#login_user_name").text();
           console.log(p_l_username);

           if($('#icon'+p_id).css('color')=='rgb(0, 0, 0)')
           {
           $.ajax(
             {
               type:"GET",
               url: "/likepost",
               data:{
                  post_id: p_id ,
                  post_like_name : p_l_username
                },
                success: function( data )
                {
                  console.log(data);
                  console.log("Successfully liked");
                  console.log($('#icon'+data).css('color'));
                  // $('#icon'+data).css({'color':'blue'});
                  // console.log($('#icon'+data).css('color'));
                  // $('#impr')
                  if($('#icon'+data).css('color')=='rgb(0, 0, 0)'){
                    var el = parseInt($('#impr'+data).text());
                    $('#impr'+data).text(el+1);
                    $('#icon'+data).css({'color':'blue'});
                    console.log($('#icon'+data).css('color'));
                  }


                }
              });
            }

           // $.ajax({
           //   type: "POST",
           //   url: "/like",
             // headers: {
             //   'Csrf-Token': '@play.filters.csrf.CSRF.getToken.map(_.value)'
             // },
             // data : {
             //   'post_id': p_id,
             //    'like_username':  p_l_username,
             //    'csrfmiddlewaretoken': '{{ csrf_token }}',
             // }
             // data: "{post_id : " + p_id + "," + "like_username : " + p_l_username +"}",
             //
             //
             // success: function(result){
             //   console.log(result);
             //   // alert(result.d);
             //   console.log("successfully like the post");
           //   }
           // });
         });
       });

       //CSRF code
//        function getCookie(name) {
//     var cookieValue = null;
//     if (document.cookie && document.cookie !== '') {
//         var cookies = document.cookie.split(';');
//         for (var i = 0; i < cookies.length; i++) {
//             var cookie = cookies[i].trim();
//             // Does this cookie string begin with the name we want?
//             if (cookie.substring(0, name.length + 1) === (name + '=')) {
//                 cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
//                 break;
//             }
//         }
//     }
//     return cookieValue;
// }
// var csrftoken = getCookie('csrftoken');
//
// function csrfSafeMethod(method) {
//     // these HTTP methods do not require CSRF protection
//     return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
// }
// $.ajaxSetup({
//     beforeSend: function(xhr, settings) {
//         if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
//             xhr.setRequestHeader("X-CSRFToken", csrftoken);
//         }
//     }
// });
       // var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();





</script>







        <!-- Slide-To-Top JavaScript (No-Need-To-Change) -->
        <script type="text/javascript">
            $(document).ready(function() {
                /*
                var defaults = {
                    containerID: 'toTop', // fading element id
                    containerHoverID: 'toTopHover', // fading element hover id
                    scrollSpeed: 1200,
                    easingType: 'linear'
                };
                */
                $().UItoTop({ easingType: 'easeOutQuart' });
            });
        </script>
        <a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
        <!-- //Slide-To-Top JavaScript -->

    </div>
    <!-- //Footer-Ends-Here -->

    <script>
$(document).ready(function(){
  // Add smooth scrolling to all links in navbar + footer link
  $(".navbar a, footer a[href='#myPage']").on('click', function(event) {

    // Prevent default anchor click behavior
    event.preventDefault();

    // Store hash
    var hash = this.hash;

    // Using jQuery's animate() method to add smooth page scroll
    // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
    $('html, body').animate({
      scrollTop: $(hash).offset().top
    }, 900, function(){

      // Add hash (#) to URL when done scrolling (default click behavior)
      window.location.hash = hash;
    });
  });

  $(window).scroll(function() {
    $(".slideanim").each(function(){
      var pos = $(this).offset().top;

      var winTop = $(window).scrollTop();
        if (pos < winTop + 600) {
          $(this).addClass("slide");
        }
    });
  });
})
</script>

</body>
<!-- Body-Ends-Here -->

</html>